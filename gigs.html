<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta 
    name="viewport" 
    content="width=device-width, initial-scale=1"
  />
  <title>BOCA – Upcoming Shows</title>

  <!-- FontAwesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Chicle&display=swap"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Cal+Sans:wght@400;700&display=swap"
    rel="stylesheet"
  />

  <!-- Your main stylesheet -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- NAVBAR (identical to index.html) -->
  <header class="navbar">
    <img
      src="images/boca_logo_white_transparent.png"
      alt="BOCA Logo (white)"
      class="logo logo--light"
    />
    <img
      src="images/boca_logo_black_transparent.png"
      alt="BOCA Logo (black)"
      class="logo logo--dark"
    />
    <nav>
      <ul class="nav-list">
        <li><a href="index.html">Home</a></li>
        <li><a href="gigs.html">Gig Schedule</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="merch.html">Merch</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
    <button class="nav-toggle" aria-label="Open menu">
      <span></span><span></span><span></span>
    </button>
  </header>

  <!-- MAIN CONTENT -->
  <main class="site-main">

    <!-- UPCOMING SHOWS -->
    <section class="gigs-section">
      <h2>Upcoming Shows</h2>
      <div id="gigs-list" class="gigs-list">
        <!-- JS will inject .gig-row elements here -->
      </div>
    </section>

  </main>

  <!-- SOCIAL FOOTER -->
  <footer class="social-footer">
    <!-- …same as index.html… -->
  </footer>

  <!-- SCRIPTS -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('gigs-list');
      fetch('shows.json')
        .then(r => r.json())
        .then(shows => {
          // 1. Parse & normalize dates
          const today = new Date();
          today.setHours(0,0,0,0);

          const upcoming = shows
            .map(s => ({
              ...s,
              dateObj: new Date(s.date)
            }))
            .filter(s => {
              s.dateObj.setHours(0,0,0,0);
              return s.dateObj >= today;
            })
            .sort((a,b) => a.dateObj - b.dateObj);

          // 2. Render
          const opts = { month: 'short', day: 'numeric', year: 'numeric' };
          upcoming.forEach(show => {
            const row = document.createElement('div');
            row.className = 'gig-row';

            // Format e.g. "Aug 9, 2025" → uppercase
            const dateStr = show.dateObj
              .toLocaleDateString('en-US', opts)
              .toUpperCase();

            row.innerHTML = `
              <div class="gig-date">${dateStr}</div>
              <div class="gig-venue">${show.venue}</div>
              <div class="gig-time">${show.time}</div>
            `;
            container.appendChild(row);
          });

          if (!upcoming.length) {
            container.innerHTML = '<p>No upcoming shows at the moment. Check back soon!</p>';
          }
        })
        .catch(err => {
          console.error(err);
          container.innerHTML = '<p>Failed to load shows.</p>';
        });
    });
  </script>

  <!-- NAV + MOBILE TOGGLE (same as index.html) -->
  <script>
    const nav = document.querySelector('.navbar');
    window.addEventListener('scroll', () =>
      nav.classList.toggle('scrolled', window.scrollY > 0)
    );
    const toggle = document.querySelector('.nav-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');
    const closeBtn = document.querySelector('.mobile-menu-close');
    toggle.addEventListener('click', () => {
      mobileMenu.setAttribute('aria-hidden','false');
      mobileMenu.classList.add('open');
    });
    closeBtn.addEventListener('click', () => {
      mobileMenu.setAttribute('aria-hidden','true');
      mobileMenu.classList.remove('open');
    });
  </script>
</body>
</html>
